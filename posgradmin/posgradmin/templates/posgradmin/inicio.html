{% extends "posgradmin/posgradmin_base.html" %}

{% block content_title %}
{% endblock %}

{% block content %}

<div class="row">
  <div class="col-sm-4">

    <div class="panel panel-default">
      <div class="panel-heading">
	<h3 class="panel-title">
	  {% if not user.perfil %}
	  <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
	  Perfil
	  {% elif user.estudiante %}
	  <span class="glyphicon glyphicon-education" aria-hidden="true"></span>
	  Estudiante [{{ user.estudiante.estado }}]
	  {% elif user.academico %}
	  <span class="glyphicon glyphicon-education" aria-hidden="true"></span>
	  Académico
	  {% endif %}
	</h3>
      </div>
      <div class="panel-body">
	{% if user.perfil %}
	<h4>{{ user.get_full_name }}</h4>
	
	{% if user.estudiante %}
	
	{% if user.estudiante.faltan_documentos %}
	<div class="alert alert-danger" role="alert">
	  <strong>No ha registrado grados académicos</strong>
	  <a href="/inicio/perfil/agregar-grado">Agregar grados académicos</a>.
	</div>
	{% else %}
	<ul class="list-group">
	  {% for grado in user.gradoacademico_set.all %}
	  <li class="list-group-item">
	    <strong>{{ grado.grado_obtenido }} </strong>@ {{ grado.institucion }}, {{ grado.facultad }}
	    <p class="list-group-item-text">nivel {{ grado.nivel }}
	  </li>
	  {% endfor %}
	</ul>
	{% endif %}


	{% if user.estudiante.get_proyecto is None %}
	<div class="alert alert-danger" role="alert">	
	  <strong>No ha registrado proyecto</strong> <a href="/inicio/estudiante/registro">registre proyecto</a>
	</div>
	{% else %}
	<ul class="list-group">
	  <li class="list-group-item">   
	    <h4>Proyecto: {{ user.estudiante.get_proyecto.nombre }}</h4>
	    Campo de Conocimiento: {{ user.estudiante.proyecto_set.last.campo_conocimiento }}
	  </li>	  
	</ul>
	    {% if not user.estudiante.get_proyecto.aprobado %}
	    <div class="alert alert-warning" role="alert">
	      <span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span>
	      Proyecto no aprobado.
	      Ver solicitud <a href="/inicio/solicitudes/{{ user.estudiante.get_proyecto.solicitud.id }}">
		#{{ user.estudiante.get_proyecto.solicitud.id }}</a>.
	    </div>
	    {% endif %}	
	{% endif %} 
	{% endif %}

	{% if user.academico %}
	{% if user.academico.tutor %}
	<p><a href="">Mis comités tutorales</a></p>
	<p><a href="">Mis estudiantes</a></p>
	{% endif %}
	<p><a href="">Mis cursos</a></p>
	<p><a href="">Generar reporte de actividades</a></p>
	{% else %}
	{% endif %}

      	  <a href="perfil/">ver mi perfil</a>	  

	{% if not user.estudiante and not user.academico %}
		  <ul>
		    <li><a href="/inicio/estudiante/registro">registrarse como estudiante</a></li>
		    <li><a href="/inicio/academico/registro">registrarse como académico</a></li>
		  </ul>
	{% endif %}

	{% else %}
	  Para interactuar con el programa de posgrado necesitamos algunos datos personales y de contacto:
	  <a href="/inicio/perfil/editar">Completar registro de perfil</a>
	  {% endif %}
      </div>
    </div>


  </div><!-- /.col-sm-4 -->


<!-- Solicitudes -->
{% if user.estudiante or user.academico %}
  <div class="col-sm-4">
    <div class="panel panel-info">
      <div class="panel-heading">
	<h3 class="panel-title">
	  <span class="glyphicon glyphicon-inbox" aria-hidden="true"></span>
	  Solicitudes</h3>
      </div>
      <div class="panel-body">
	<p>
	<a href="/inicio/solicitudes/nueva">
	  <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
	  nueva solicitud
	</a>
	</p>
	<!-- lista conteo -->
	<ul class="list-group">
	  {% if user.academico %}
	  {% for s in user.academico.cuantas_solicitudes %}
	  <li class="list-group-item">
	    <a href="/inicio/solicitudes/e/{{ s.0 }}">{{ s.0 }} <span class="badge">{{ s.1 }}</span></a>
	  </li>
	  {% endfor %}

	  {% else %}

	  {% for s in user.estudiante.cuantas_solicitudes %}
	  <li class="list-group-item">
	    <a href="/inicio/solicitudes/e/{{ s.0 }}">{{ s.0 }} <span class="badge">{{ s.1 }}</span></a>
	  </li>
	  {% endfor %}

	  {% endif %}

	</ul>

      </div>
    </div>
{% endif %}

  </div>
</div>

{% if user.is_staff %}
<div class="row">
  <div class="col-sm-4">

    <div class="panel panel-warning">
      <div class="panel-heading">
	<h3 class="panel-title">
	  <span class="glyphicon glyphicon-king" aria-hidden="true"></span>
	  Coordinación
	</h3>
      </div>
      <div class="panel-body">
	<p><a href="">Agendar Sesión del Comité Académico</a></p>
	<p><a href="">Académicos</a></p>
	<p><a href="">Tutores</a></p>
	<p><a href="">Profesores</a></p>
	<p><a href="">Estudiantes</a></p>
      </div>
    </div>
  </div>
</div>
{% endif %}





{% endblock %}
